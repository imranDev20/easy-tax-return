generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

enum ResidentialStatus {
  RESIDENT
  NON_RESIDENT
}

enum SpecialBenefits {
  NONE
  GAZETTED_WAR_WOUNDED_FREEDOM_FIGHTER
  FEMALE
  THIRD_GENDER
  DISABLED_PERSON
  AGED_65_OR_MORE
}

enum MinimumTax {
  DHAKA_CHATTOGRAM_CITY_CORPORATION_AREA
  OTHER_CITY_CORPORATION_AREA
  OTHER_AREA
}

enum NetWealthSurcharge {
  YES
  NO
}

enum RepairCollection {
  COMMERCIAL_PROPERTY
  NON_COMMERCIAL
  RESIDENTIAL_PROPERTY
  MIXED_PROPERTY
}

enum NetWealthLastDate {
  YES
  NO_I_AM_A_NEW_TAXPAYER
}

enum CalculationType {
  CALCULATE
  RECALCULATE
}

enum IncomeFromEmployment {
  YES
  NO
}

enum Role {
  ADMIN
  USER
}

enum EmploymentType {
  GOVERNMENT
  PRIVATE
}

enum TransportCCType {
  LT_EQ_2500
  GT_2500
}

model User {
  id            String           @id @default(cuid())
  name          String?
  email         String?          @unique
  emailVerified DateTime?
  image         String?
  password      String?
  role          Role             @default(USER)
  accounts      Account[]
  orders        Order[] // Add this line
  individualTax IndividualTaxes? // Add this line
  createdAt     DateTime         @default(now())
  updatedAt     DateTime         @updatedAt
}

model Account {
  id                String  @id @default(cuid())
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String? @db.Text
  access_token      String? @db.Text
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String? @db.Text
  session_state     String?

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
}

model IndividualTaxes {
  id                                         String               @id @default(cuid())
  userId                                     String               @unique
  user                                       User                 @relation(fields: [userId], references: [id], onDelete: Cascade)
  order                                      Order?
  taxpayerName                               String
  nationalId                                 String
  tin                                        String
  circle                                     String
  zone                                       String
  residentialStatus                          ResidentialStatus
  specialBenefits                            SpecialBenefits?
  isParentOfDisabledPerson                   Boolean?
  dateOfBirth                                String
  spouseName                                 String?
  spouseTin                                  String?
  addressLine1                               String
  addressLine2                               String?
  telephone                                  String?
  mobile                                     String
  email                                      String
  employerName                               String?
  businessName                               String?
  bin                                        String?
  partnersInfo                               String?
  partnersMembersAssociation1                String?
  partnersMembersAssociation2                String?
  // Image 2
  incomeFromEmployment                       String?
  incomeFromRent                             String?
  incomeFromAgriculture                      String?
  incomeFishFarming                          Boolean?
  incomeFishFarmingAmount                    String?
  incomeFromBusiness                         String?
  incomeFromBusinessMinimum                  String?
  incomeFromCapitalGains                     String?
  shareOfIncomeFromAOP                       String?
  incomeOfMinor                              String?
  taxableIncomeFromAbroad                    String?
  minimumTax                                 MinimumTax
  netWealthSurcharge                         NetWealthSurcharge
  environmentalSurcharge                     String?
  delayInterest                              String?
  calculate                                  CalculationType
  advanceTaxPaidAmount                       String?
  adjustmentOfTaxRefund                      String?
  taxPaidWithThisReturn                      String
  listOfDocumentsFurnishedWithThisReturn1    String?
  listOfDocumentsFurnishedWithThisReturn2    String?
  fatherOrHusband                            String
  placeOfSignature                           String?
  signature                                  String?
  dateOfSignature                            String
  // Image 4 - Govt
  isIncomeFromEmployment                     IncomeFromEmployment
  typeOfEmployment                           EmploymentType
  basicPayGovtEmployment                     Float?
  arrearPayGovtEmployment                    Float?
  specialAllowanceGovtEmployment             Float?
  houseRentAllowanceGovtEmployment           Float?
  medicalAllowanceGovtEmployment             Float?
  conveyanceAllowanceGovtEmployment          Float?
  festivalAllowanceGovtEmployment            Float?
  allowanceForSupportStaffGovtEmployment     Float?
  leaveAllowanceGovtEmployment               Float?
  honorariumRewardGovtEmployment             Float?
  overtimeAllowanceGovtEmployment            Float?
  banglaNoboborshoAllowancesGovtEmployment   Float?
  interestAccruedProvidentFundGovtEmployment Float?
  lumpGrantGovtEmployment                    Float?
  gratuityGovtEmployment                     Float?
  otherAllowanceGovtEmployment               Float?
  otherAllowanceExemptedGovtEmployment       Float?
  totalGovtEmployment                        Float?
  // Image 4 - Private
  basicPayPrivateEmployment                  Float?
  allowancesPrivateEmployment                Float?

  advanceArrearSalaryPrivateEmployment                           Float?
  gratuityAnnuityPensionOrSimilarBenefitPrivateEmployment        Float?
  perquisitesPrivateEmployment                                   Float?
  receiptInLieuOfOrInAdditionToSalaryOrWagesPrivateEmployment    Float?
  incomeFromEmployeeShareSchemePrivateEmployment                 Float?
  accommodationFacilityPrivateEmployment                         Float?
  tranportFacilityPrivateVehicleCC                               TransportCCType
  transportFacilityPrivateEmployment                             Float?
  anyOtherFacilityProvidedByEmployerPrivateEmployment            Float?
  employerContributionToRecognizedProvidentFundPrivateEmployment Float?
  otherIfAnyPrivateEmployment                                    Float?
  totalSalaryReceivedPrivateEmployment                           Float?
  exemptedAmountPrivateEmployment                                Float?
  totalIncomeFromSalaryPrivateEmployment                         Float?
  // Image 5
  locationDescriptionOwnershipProportionOfProperty               String?
  rentReceivedOrAnnualValue                                      String?
  advanceRentReceived                                            String?
  valueOfAnyBenefit                                              String?
  adjustedAdvanceRent                                            String?
  vacancyAllowance                                               String?
  repairCollection                                               RepairCollection?
  municipalOrLocalTax                                            String?
  landRevenue                                                    String?
  interestMortgageCapitalCharge                                  String?
  insurancePremiumPaid                                           String?
  others                                                         String?
  taxpayersShare                                                 String
  taxDeductedSourceFromIncomeRent                                String?
  salesTurnoverReceipt                                           String?
  grossProfit                                                    String?
  generalExpensesSellingExpenses                                 String?
  nameOfBusiness                                                 String?
  natureOfBusiness                                               String?
  addressOfBusiness                                              String?
  salesTurnoverReceipts                                          String?
  grossProfitAmount                                              String?
  generalAdministrativeSellingExpenses                           String?
  badDebtExpense                                                 String?
  inventories                                                    String?
  fixedAssets                                                    String?
  otherAssets                                                    String?
  openingCapital                                                 String?
  withdrawalsInTheIncomeYear                                     String?
  liabilities                                                    String?
  interestProfitFromBankFIAmount                                 String?
  interestProfitFromBankFIDeductions                             String?
  interestProfitFromBankFITax                                    String?
  incomeFromSavingCertificatesAmount                             String?
  incomeFromSavingCertificatesDeductions                         String?
  incomeFromSavingCertificatesTax                                String?
  incomeFromSecuritiesDebenturesAmount                           String?
  incomeFromSecuritiesDebenturesDeductions                       String?
  incomeFromSecuritiesDebenturesTax                              String?
  incomeFromFinancialProductSchemeAmount                         String?
  incomeFromFinancialProductSchemeDeductions                     String?
  incomeFromFinancialProductSchemeTax                            String?
  dividendIncomeAmount                                           String?
  dividendIncomeDeductions                                       String?
  dividendIncomeTax                                              String?
  capitalGainFromTransferOfPropertyAmount                        String?
  capitalGainFromTransferOfPropertyDeductions                    String?
  capitalGainFromTransferOfPropertyTax                           String?
  incomeFromBusinessAmount                                       String?
  incomeFromBusinessDeductions                                   String?
  incomeFromBusinessTax                                          String?
  workersParticipationFundAmount                                 String?
  workersParticipationFundDeductions                             String?
  workersParticipationFundTax                                    String?
  incomeFromOtherSourcesAmount                                   String?
  incomeFromOtherSourcesDeductions                               String?
  incomeFromOtherSourcesTax                                      String?
  lifeInsurancePremium                                           String?
  contributionToDeposit                                          String?
  investmentInGovernmentSecurities1                              String?
  investmentInGovernmentSecurities2                              String?
  investmentInSecurities                                         String?
  contributionToProvidentFund                                    String?
  selfAndEmployersContribution                                   String?
  contributionToSuperAnnuationFund                               String?
  contributionToBenevolentFund                                   String?
  contributionToZakatFund1                                       String?
  contributionToZakatFund2                                       String?
  othersIf1                                                      String?
  othersIf2                                                      String?
  expensesForFoodAmount                                          String?
  expensesForFoodComment                                         String?
  housingExpenseAmount                                           String?
  housingExpenseComment                                          String?
  personalTransportationExpensesAmount                           String?
  personalTransportationExpensesAmountComment                    String?
  utilityExpenseAmount                                           String?
  utilityExpenseComment                                          String?
  educationExpensesAmount                                        String?
  educationExpensesComment                                       String?
  personalExpenseAmount                                          String?
  personalExpenseComment                                         String?
  festivalExpenseAmount                                          String?
  festivalExpenseComment                                         String?
  taxDeductedAmount                                              String?
  taxDeductedComment                                             String?
  advanceTaxPaid2Amount                                          String?
  advanceTaxPaidComment                                          String?
  taxSurchargePaidAmount                                         String?
  taxSurchargePaidComment                                        String?
  interestPaidAmount                                             String?
  interestPaidComment                                            String?
  total                                                          String?
  exemptedIncomeFromSalary                                       String?
  exemptedIncomeFromBusiness                                     String?
  exemptedAgriculturalIncome                                     String?
  incomeFromProvidentFund                                        String?
  foreignRemittance                                              String?
  typeOfReceipts1                                                String?
  typeOfReceipts2                                                String?
  typeOfReceipts3                                                String?
  typeOfReceiptsAmount1                                          String?
  typeOfReceiptsAmount2                                          String?
  typeOfReceiptsAmount3                                          String?
  netWealthLastDate                                              NetWealthLastDate
  netWealthLastDateAmount                                        String?
  giftExpense                                                    String?
  institutionalLiabilities                                       String?
  nonInstitutionalLiabilities                                    String?
  otherLiabilities                                               String?
  totalAssetOfBusiness                                           String?
  lessBusinessLiabilities                                        String?
  companyName1                                                   String?
  companyName2                                                   String?
  companyName3                                                   String?
  noOfShare1                                                     String?
  noOfShare2                                                     String?
  noOfShare3                                                     String?
  value1                                                         String?
  value2                                                         String?
  value3                                                         String?
  nameOfPartnershipFirm1                                         String?
  nameOfPartnershipFirm2                                         String?
  nameOfPartnershipFirm3                                         String?
  shareOfProfit1                                                 String?
  shareOfProfit2                                                 String?
  shareOfProfit3                                                 String?
  capitalContributed1                                            String?
  capitalContributed2                                            String?
  capitalContributed3                                            String?
  locationDescription1                                           String?
  locationDescription2                                           String?
  locationDescription3                                           String?
  locationDescription4                                           String?
  locationDescription5                                           String?
  locationValue1                                                 String?
  locationValue2                                                 String?
  locationValue3                                                 String?
  locationValue4                                                 String?
  locationValue5                                                 String?
  agriculturalLocationAndDescription1                            String?
  agriculturalLocationAndDescription2                            String?
  agriculturalLocationAndDescription3                            String?
  agriculturalLocationValue1                                     String?
  agriculturalLocationValue2                                     String?
  agriculturalLocationValue3                                     String?
  shareDebentureUnitCertificate                                  String?
  bondsGovernment                                                String?
  sanchayapatraSavingsCertificate                                String?
  depositPensionScheme                                           String?
  loansGivenToOthers                                             String?
  name                                                           String?
  nid                                                            String?
  nidValue                                                       String?
  savingDeposit                                                  String?
  providentFund                                                  String?
  otherInvestment1                                               String?
  otherInvestment2                                               String?
  typeOfMotorVehicle1                                            String?
  typeOfMotorVehicle2                                            String?
  registrationNumber1                                            String?
  registrationNumber2                                            String?
  motorValue1                                                    String?
  motorValue2                                                    String?
  ornaments1                                                     String?
  ornaments2                                                     String?
  furnitureAndElectronic                                         String?
  othersAssets1                                                  String?
  othersAssets2                                                  String?
  bankBalance                                                    String?
  cashInHand                                                     String?
  others1                                                        String?
  others2                                                        String?
  assetOutsideBangladesh                                         String?
  createdAt                                                      DateTime          @default(now())
  updatedAt                                                      DateTime          @updatedAt
}

enum PaymentMethod {
  BKASH
  NAGAD
  UPAY
  SURECASH
  MKASH
  ROCKET
  BANK_TRANSFER
  OTHERS
}

enum PaymentStatus {
  PENDING
  PAID
  CANCELLED
  EXPIRED
}

model Order {
  id                String           @id @default(cuid())
  userId            String
  user              User             @relation(fields: [userId], references: [id], onDelete: Cascade)
  individualTaxesId String?          @unique
  individualTaxes   IndividualTaxes? @relation(fields: [individualTaxesId], references: [id], onDelete: Cascade)
  amount            Float?
  paymentMethod     PaymentMethod?
  paymentStatus     PaymentStatus    @default(PENDING)
  transactionID     String?
  createdAt         DateTime         @default(now())
  updatedAt         DateTime         @updatedAt
}
